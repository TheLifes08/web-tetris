<!DOCTYPE html>

<html lang="Russian">
    <head>
        <title>Tetris Game - Records</title>
        <meta charset="utf-8">
        <script type="text/javascript">
            function onLoad() {
                createRecordsTable()
            }

            function createRecordsTable(){
                let records = JSON.parse(window.localStorage["tetris.records"]);
                let table = document.getElementById("records-table");
                table.style.width  = "300px";
                table.style.border = "1px solid black";
                let rows = []

                for (let player in records) {
                    rows.push({username: player, score: records[player]})
                }

                rows.sort((a, b) => {
                    return b.score - a.score;
                });

                for (let i = 0; i < rows.length; ++i) {
                    let row = table.insertRow();
                    let cellName = row.insertCell();
                    let cellScore = row.insertCell();
                    cellName.appendChild(document.createTextNode(rows[i].username));
                    cellName.style.border = "1px solid black";
                    cellName.style.textAlign = "center";
                    cellScore.appendChild(document.createTextNode(rows[i].score));
                    cellScore.style.border = "1px solid black";
                    cellScore.style.textAlign = "center";
                }
            }

            function redirectToGame() {
                window.location.href = "https://localhost/main.html";
            }
        </script>
    </head>

    <body onload="onLoad()">
        <span>Таблица рекордов:</span><br>
        <table id="records-table" style="margin: 5px;">
            <tr>
                <th>Игрок</th>
                <th>Очки</th>
            </tr>
            <tbody></tbody>
        </table>
        <div style="padding: 2px;">
            <button style="width: 200px;" onclick="redirectToGame()">Играть заново</button>
        </div>
    </body>
</html>